{
  "description": "ComplianceOfficer agent tests for roster validation",
  "test_cases": [
    {
      "name": "validate_roster_with_explicit_id",
      "description": "Agent should call validate_roster_compliance with the specified roster ID",
      "input": "validate roster_20250106080000_0001",
      "expected_tool_trajectory": [
        {"tool_name": "validate_roster_compliance"}
      ],
      "expected_response_contains": ["COMPLIANCE", "roster_20250106080000_0001"]
    },
    {
      "name": "validate_roster_default",
      "description": "Agent should call validate_roster_compliance without ID when none specified",
      "input": "validate the roster",
      "expected_tool_trajectory": [
        {"tool_name": "validate_roster_compliance"}
      ],
      "expected_response_contains": ["COMPLIANCE"]
    },
    {
      "name": "call_both_validation_tools",
      "description": "Agent should call both validate_roster_compliance and validate_weekly_hours",
      "input": "perform full compliance check on roster_20250106080000_0001 including certification and hour limits",
      "expected_tool_trajectory": [
        {"tool_name": "validate_roster_compliance"},
        {"tool_name": "validate_weekly_hours"}
      ],
      "expected_response_contains": ["Certification", "hour"]
    },
    {
      "name": "detect_consecutive_violation",
      "description": "Agent should detect consecutive shift violations in roster",
      "input": "validate roster_20250106080000_0002",
      "expected_tool_trajectory": [
        {"tool_name": "validate_roster_compliance"}
      ],
      "expected_response_contains": ["COMPLIANCE"]
    },
    {
      "name": "check_certification_requirements",
      "description": "Agent should check certification compliance",
      "input": "validate roster_20250106080000_0001 and check certifications",
      "expected_tool_trajectory": [
        {"tool_name": "validate_roster_compliance"}
      ],
      "expected_response_contains": ["Certification"]
    },
    {
      "name": "check_weekly_hours_only",
      "description": "Agent should check weekly hour limits when specifically asked",
      "input": "use validate_weekly_hours to check hour limits in roster_20250106080000_0001",
      "expected_tool_trajectory": [
        {"tool_name": "validate_weekly_hours"}
      ],
      "expected_response_contains": ["hour"]
    },
    {
      "name": "lookup_nurse_certifications",
      "description": "Agent should provide nurse certification lookup when asked",
      "input": "use get_nurse_certification_lookup to show me what certifications the nurses have",
      "expected_tool_trajectory": [
        {"tool_name": "get_nurse_certification_lookup"}
      ],
      "expected_response_contains": ["Certification"]
    },
    {
      "name": "handle_no_draft_roster",
      "description": "Agent should handle case when no draft roster exists",
      "input": "validate the most recent draft roster",
      "expected_response_contains": ["draft", "roster"],
      "expected_tool_trajectory": [
        {"tool_name": "validate_roster_compliance"}
      ]
    },
    {
      "name": "check_senior_coverage",
      "description": "Agent should verify senior coverage requirements",
      "input": "validate roster_20250106080000_0001 and tell me about senior coverage",
      "expected_tool_trajectory": [
        {"tool_name": "validate_roster_compliance"}
      ],
      "expected_response_contains": ["Senior"]
    },
    {
      "name": "comprehensive_compliance_review",
      "description": "Agent should perform comprehensive compliance review calling multiple tools",
      "input": "do a full compliance review of roster_20250106080000_0001: validate compliance, check weekly hours, and get nurse stats",
      "expected_tool_trajectory": [
        {"tool_name": "validate_roster_compliance"},
        {"tool_name": "validate_weekly_hours"},
        {"tool_name": "get_nurse_stats"}
      ],
      "expected_response_contains": ["COMPLIANCE", "Status"]
    },
    {
      "name": "validate_nonexistent_roster",
      "description": "Agent should handle non-existent roster gracefully",
      "input": "validate roster_does_not_exist_123",
      "expected_tool_trajectory": [
        {"tool_name": "validate_roster_compliance"}
      ],
      "expected_response_contains": ["N/A"]
    },
    {
      "name": "check_seniority_requirements",
      "description": "Agent should verify seniority requirements",
      "input": "validate roster_20250106080000_0001 and check seniority levels",
      "expected_tool_trajectory": [
        {"tool_name": "validate_roster_compliance"}
      ],
      "expected_response_contains": ["Seniority"]
    },
    {
      "name": "get_regulations_context",
      "description": "Agent should retrieve regulations when asked",
      "input": "use get_regulations to show me the compliance regulations",
      "expected_tool_trajectory": [
        {"tool_name": "get_regulations"}
      ],
      "expected_response_contains": ["regulation"]
    },
    {
      "name": "check_fatigue_in_compliance",
      "description": "Agent should check fatigue scores as part of soft constraint review",
      "input": "use get_nurse_stats to check fatigue levels for nurses",
      "expected_tool_trajectory": [
        {"tool_name": "get_nurse_stats"}
      ],
      "expected_response_contains": ["fatigue"]
    }
  ]
}
